<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1211px" preserveAspectRatio="none" style="width:1008px;height:1211px;" version="1.1" viewBox="0 0 1008 1211" width="1008px" zoomAndPan="magnify"><defs><filter height="300%" id="f1jg2lqw3cvomm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster butterfly--><polygon fill="#DDDDDD" filter="url(#f1jg2lqw3cvomm)" points="22,24,96,24,103,46.2969,986,46.2969,986,1199,22,1199,22,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="103" y1="46.2969" y2="46.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="26" y="38.9951">butterfly</text><!--class Socket--><rect fill="#FEFECE" filter="url(#f1jg2lqw3cvomm)" height="265.6797" id="Socket" style="stroke: #A80036; stroke-width: 1.5;" width="356" x="611" y="59"/><ellipse cx="763.25" cy="75" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M766.2188,80.6406 Q765.6406,80.9375 765,81.0781 Q764.3594,81.2344 763.6563,81.2344 Q761.1563,81.2344 759.8281,79.5938 Q758.5156,77.9375 758.5156,74.8125 Q758.5156,71.6875 759.8281,70.0313 Q761.1563,68.375 763.6563,68.375 Q764.3594,68.375 765,68.5313 Q765.6563,68.6875 766.2188,68.9844 L766.2188,71.7031 Q765.5938,71.125 765,70.8594 Q764.4063,70.5781 763.7813,70.5781 Q762.4375,70.5781 761.75,71.6563 Q761.0625,72.7188 761.0625,74.8125 Q761.0625,76.9063 761.75,77.9844 Q762.4375,79.0469 763.7813,79.0469 Q764.4063,79.0469 765,78.7813 Q765.5938,78.5 766.2188,77.9219 L766.2188,80.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="43" x="783.75" y="79.1543">Socket</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="612" x2="966" y1="91" y2="91"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="619" y="99.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="283" x="631" y="105.2104">_socketDomain, _socketType, _socketProtocol: int</text><polygon fill="none" points="622,110.707,626,114.707,622,118.707,618,114.707" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="631" y="118.0151">_fd: int</text><polygon fill="none" points="622,123.5117,626,127.5117,622,131.5117,618,127.5117" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="631" y="130.8198">_addr: sockaddr_in</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="612" x2="966" y1="137.4141" y2="137.4141"/><ellipse cx="622" cy="149.3164" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="228" x="631" y="151.6245">Socket(int domain, int type, int protocol)</text><ellipse cx="622" cy="162.1211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="330" x="631" y="164.4292">Socket(int fileDescriptor, int domain, int type, int protocol)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="635" y="177.2339"/><ellipse cx="622" cy="187.7305" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="161" x="631" y="190.0386">getFileDescriptor() const: int</text><ellipse cx="622" cy="200.5352" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="631" y="202.8433">shutdown() const: bool</text><ellipse cx="622" cy="213.3398" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="631" y="215.6479">setOptions() const: bool</text><ellipse cx="622" cy="226.1445" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="631" y="228.4526">setBlocking() const: bool</text><ellipse cx="622" cy="238.9492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="631" y="241.2573">setNonBlocking() const: bool</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="635" y="254.062"/><ellipse cx="622" cy="264.5586" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="161" x="631" y="266.8667">bind(unsigned int port): bool</text><ellipse cx="622" cy="277.3633" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="631" y="279.6714">listen() const: bool</text><ellipse cx="622" cy="290.168" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="631" y="292.4761">accept(): std::shared_ptr&lt;Socket&gt;</text><ellipse cx="622" cy="302.9727" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="301" x="631" y="305.2808">connect(const std::string&amp; host, const int port): bool</text><ellipse cx="622" cy="315.7773" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="631" y="318.0854">disconnect() const: bool</text><!--class TCPSocket--><rect fill="#FEFECE" filter="url(#f1jg2lqw3cvomm)" height="137.6328" id="TCPSocket" style="stroke: #A80036; stroke-width: 1.5;" width="247" x="665.5" y="386"/><ellipse cx="751.75" cy="402" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M754.7188,407.6406 Q754.1406,407.9375 753.5,408.0781 Q752.8594,408.2344 752.1563,408.2344 Q749.6563,408.2344 748.3281,406.5938 Q747.0156,404.9375 747.0156,401.8125 Q747.0156,398.6875 748.3281,397.0313 Q749.6563,395.375 752.1563,395.375 Q752.8594,395.375 753.5,395.5313 Q754.1563,395.6875 754.7188,395.9844 L754.7188,398.7031 Q754.0938,398.125 753.5,397.8594 Q752.9063,397.5781 752.2813,397.5781 Q750.9375,397.5781 750.25,398.6563 Q749.5625,399.7188 749.5625,401.8125 Q749.5625,403.9063 750.25,404.9844 Q750.9375,406.0469 752.2813,406.0469 Q752.9063,406.0469 753.5,405.7813 Q754.0938,405.5 754.7188,404.9219 L754.7188,407.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="66" x="772.25" y="406.1543">TCPSocket</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="666.5" x2="911.5" y1="418" y2="418"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="666.5" x2="911.5" y1="426" y2="426"/><ellipse cx="676.5" cy="437.9023" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="685.5" y="440.2104">TCPSocket()</text><ellipse cx="676.5" cy="450.707" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="685.5" y="453.0151">TCPSocket(int fileDescriptor)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="689.5" y="465.8198"/><ellipse cx="676.5" cy="476.3164" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="219" x="685.5" y="478.6245">accept(): std::shared_ptr&lt;TCPSocket&gt;</text><ellipse cx="676.5" cy="489.1211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="685.5" y="491.4292">send(const std::string&amp; s) const: bool</text><ellipse cx="676.5" cy="501.9258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="181" x="685.5" y="504.2339">recv(char *buf,int len) const: int</text><ellipse cx="676.5" cy="514.7305" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="221" x="685.5" y="517.0386">recvAll(int chunkSize) const: std::string</text><!--class HTTPServer--><rect fill="#FEFECE" filter="url(#f1jg2lqw3cvomm)" height="227.2656" id="HTTPServer" style="stroke: #A80036; stroke-width: 1.5;" width="363" x="607.5" y="633"/><ellipse cx="749.25" cy="649" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M752.2188,654.6406 Q751.6406,654.9375 751,655.0781 Q750.3594,655.2344 749.6563,655.2344 Q747.1563,655.2344 745.8281,653.5938 Q744.5156,651.9375 744.5156,648.8125 Q744.5156,645.6875 745.8281,644.0313 Q747.1563,642.375 749.6563,642.375 Q750.3594,642.375 751,642.5313 Q751.6563,642.6875 752.2188,642.9844 L752.2188,645.7031 Q751.5938,645.125 751,644.8594 Q750.4063,644.5781 749.7813,644.5781 Q748.4375,644.5781 747.75,645.6563 Q747.0625,646.7188 747.0625,648.8125 Q747.0625,650.9063 747.75,651.9844 Q748.4375,653.0469 749.7813,653.0469 Q750.4063,653.0469 751,652.7813 Q751.5938,652.5 752.2188,651.9219 L752.2188,654.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="71" x="769.75" y="653.1543">HTTPServer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="608.5" x2="969.5" y1="665" y2="665"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="615.5" y="673.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="627.5" y="679.2104">_port: unsigned int port</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="615.5" y="686.707"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="627.5" y="692.0151">_running: bool</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="615.5" y="699.5117"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="337" x="627.5" y="704.8198">_TCPSocket, _newTCPSocket: std::shared_ptr&lt;TCPSocket&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="615.5" y="712.3164"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="261" x="627.5" y="717.6245">_httpRequest: std::unique_ptr&lt;HTTPRequest&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="608.5" x2="969.5" y1="724.2188" y2="724.2188"/><ellipse cx="618.5" cy="736.1211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="627.5" y="738.4292">HTTPServer(unsigned int port)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="631.5" y="751.2339"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="615.5" y="758.7305"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="627.5" y="764.0386">handleRequest():</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="615.5" y="771.5352"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="627.5" y="776.8433">recvRequest():</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="615.5" y="784.3398"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="627.5" y="789.6479">processRequest():</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="615.5" y="797.1445"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="627.5" y="802.4526">preprareResponse():</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="615.5" y="809.9492"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="627.5" y="815.2573">sendResponse():</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="631.5" y="828.062"/><ellipse cx="618.5" cy="838.5586" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="627.5" y="840.8667">run(): void</text><ellipse cx="618.5" cy="851.3633" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="64" x="627.5" y="853.6714">stop(): void</text><!--class HTTPSchema--><rect fill="#FEFECE" filter="url(#f1jg2lqw3cvomm)" height="291.2891" id="HTTPSchema" style="stroke: #A80036; stroke-width: 1.5;" width="534" x="38" y="601"/><ellipse cx="260.25" cy="617" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M263.2188,622.6406 Q262.6406,622.9375 262,623.0781 Q261.3594,623.2344 260.6563,623.2344 Q258.1563,623.2344 256.8281,621.5938 Q255.5156,619.9375 255.5156,616.8125 Q255.5156,613.6875 256.8281,612.0313 Q258.1563,610.375 260.6563,610.375 Q261.3594,610.375 262,610.5313 Q262.6563,610.6875 263.2188,610.9844 L263.2188,613.7031 Q262.5938,613.125 262,612.8594 Q261.4063,612.5781 260.7813,612.5781 Q259.4375,612.5781 258.75,613.6563 Q258.0625,614.7188 258.0625,616.8125 Q258.0625,618.9063 258.75,619.9844 Q259.4375,621.0469 260.7813,621.0469 Q261.4063,621.0469 262,620.7813 Q262.5938,620.5 263.2188,619.9219 L263.2188,622.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="81" x="280.75" y="621.1543">HTTPSchema</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="571" y1="633" y2="633"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46" y="641.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="233" x="58" y="647.2104">_data, _body, _messageType: std::string</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46" y="654.707"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="58" y="660.0151">_httpMethod: Method</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46" y="667.5117"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="58" y="672.8198">_protocol: Protocol</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46" y="680.3164"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="363" x="58" y="685.6245">_httpHeaders: std::vector&lt; std::pair&lt;std::string, std::string&gt; &gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="571" y1="692.2188" y2="692.2188"/><ellipse cx="49" cy="704.1211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="271" x="58" y="706.4292">HTTPSchema(const std::string &amp;messageType)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="62" y="719.2339"/><ellipse cx="49" cy="729.7305" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="58" y="732.0386">print() const: void</text><ellipse cx="49" cy="742.5352" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="248" x="58" y="744.8433">addHTTPData(const std::string &amp;data): void</text><ellipse cx="49" cy="755.3398" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="183" x="58" y="757.6479">getHTTPData() const: std::string</text><ellipse cx="49" cy="768.1445" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="199" x="58" y="770.4526">setProtocol(Protocol protocol): void</text><ellipse cx="49" cy="780.9492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="161" x="58" y="783.2573">getProtocol() const: Protocol</text><ellipse cx="49" cy="793.7539" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="58" y="796.062">addBody(const std::string &amp;body)</text><ellipse cx="49" cy="806.5586" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="156" x="58" y="808.8667">getBody() const: std::string</text><ellipse cx="49" cy="819.3633" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="508" x="58" y="821.6714">setHTTPHeader(const std::string &amp;headerName, const std::string &amp;headerContent): void</text><ellipse cx="49" cy="832.168" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="379" x="58" y="834.4761">getHTTPHeader(const std::string &amp;headerName) const: std::string</text><ellipse cx="49" cy="844.9727" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="194" x="58" y="847.2808">getHTTPHeaderSize() const: size_t</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="62" y="860.0854"/><ellipse cx="49" cy="870.582" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="58" y="872.8901">parseIncoming() = 0: void</text><ellipse cx="49" cy="883.3867" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="58" y="885.6948">prepareOutgoing() = 0: void</text><!--class HTTPRequest--><rect fill="#FEFECE" filter="url(#f1jg2lqw3cvomm)" height="214.4609" id="HTTPRequest" style="stroke: #A80036; stroke-width: 1.5;" width="308" x="181" y="969"/><ellipse cx="289.25" cy="985" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M292.2188,990.6406 Q291.6406,990.9375 291,991.0781 Q290.3594,991.2344 289.6563,991.2344 Q287.1563,991.2344 285.8281,989.5938 Q284.5156,987.9375 284.5156,984.8125 Q284.5156,981.6875 285.8281,980.0313 Q287.1563,978.375 289.6563,978.375 Q290.3594,978.375 291,978.5313 Q291.6563,978.6875 292.2188,978.9844 L292.2188,981.7031 Q291.5938,981.125 291,980.8594 Q290.4063,980.5781 289.7813,980.5781 Q288.4375,980.5781 287.75,981.6563 Q287.0625,982.7188 287.0625,984.8125 Q287.0625,986.9063 287.75,987.9844 Q288.4375,989.0469 289.7813,989.0469 Q290.4063,989.0469 291,988.7813 Q291.5938,988.5 292.2188,987.9219 L292.2188,990.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="83" x="309.75" y="989.1543">HTTPRequest</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="182" x2="488" y1="1001" y2="1001"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="189" y="1009.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="201" y="1015.2104">_url, _userAgent: std::string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="182" x2="488" y1="1021.8047" y2="1021.8047"/><ellipse cx="192" cy="1033.707" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="201" y="1036.0151">HTTPRequest()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="205" y="1048.8198"/><ellipse cx="192" cy="1059.3164" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="196" x="201" y="1061.6245">setMethod(Method &amp;method): void</text><ellipse cx="192" cy="1072.1211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="151" x="201" y="1074.4292">getMethod() const: Method</text><ellipse cx="192" cy="1084.9258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="201" y="1087.2339">setURL(const std::string &amp;url): void</text><ellipse cx="192" cy="1097.7305" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="201" y="1100.0386">getURL() const: std::string</text><ellipse cx="192" cy="1110.5352" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="282" x="201" y="1112.8433">setUserAgent(const std::string &amp;userAgent): void</text><ellipse cx="192" cy="1123.3398" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="201" y="1125.6479">getUserAgent() const: std::string</text><ellipse cx="192" cy="1136.1445" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="170" x="201" y="1138.4526">getRequestSize() const: size_t</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="205" y="1151.2573"/><ellipse cx="192" cy="1161.7539" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="201" y="1164.062">parseIncoming(): void</text><ellipse cx="192" cy="1174.5586" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="201" y="1176.8667">prepareOutgoing(): void</text><!--class HTTPResponse--><rect fill="#FEFECE" filter="url(#f1jg2lqw3cvomm)" height="201.6563" id="HTTPResponse" style="stroke: #A80036; stroke-width: 1.5;" width="266" x="605" y="975"/><ellipse cx="687.25" cy="991" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M690.2188,996.6406 Q689.6406,996.9375 689,997.0781 Q688.3594,997.2344 687.6563,997.2344 Q685.1563,997.2344 683.8281,995.5938 Q682.5156,993.9375 682.5156,990.8125 Q682.5156,987.6875 683.8281,986.0313 Q685.1563,984.375 687.6563,984.375 Q688.3594,984.375 689,984.5313 Q689.6563,984.6875 690.2188,984.9844 L690.2188,987.7031 Q689.5938,987.125 689,986.8594 Q688.4063,986.5781 687.7813,986.5781 Q686.4375,986.5781 685.75,987.6563 Q685.0625,988.7188 685.0625,990.8125 Q685.0625,992.9063 685.75,993.9844 Q686.4375,995.0469 687.7813,995.0469 Q688.4063,995.0469 689,994.7813 Q689.5938,994.5 690.2188,993.9219 L690.2188,996.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="93" x="707.75" y="995.1543">HTTPResponse</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="606" x2="870" y1="1007" y2="1007"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="613" y="1015.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="625" y="1021.2104">_reasonPhrase: std::string</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="613" y="1028.707"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="625" y="1034.0151">_statusCode: size_t</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="606" x2="870" y1="1040.6094" y2="1040.6094"/><ellipse cx="616" cy="1052.5117" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="625" y="1054.8198">HTTPResponse()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="629" y="1067.6245"/><ellipse cx="616" cy="1078.1211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="224" x="625" y="1080.4292">setStatusCode(size_t statusCode): void</text><ellipse cx="616" cy="1090.9258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="625" y="1093.2339">getStatusCode() const: size_t</text><ellipse cx="616" cy="1103.7305" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="240" x="625" y="1106.0386">setReasonPhrase(size_t statusCode): void</text><ellipse cx="616" cy="1116.5352" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="625" y="1118.8433">getReasonPhrase() const: std::string</text><ellipse cx="616" cy="1129.3398" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="180" x="625" y="1131.6479">getResponseSize() const: size_t</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="629" y="1144.4526"/><ellipse cx="616" cy="1154.9492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="625" y="1157.2573">parseIncoming(): void</text><ellipse cx="616" cy="1167.7539" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="625" y="1170.062">prepareOutgoing(): void</text><!--link Socket to TCPSocket--><path d="M789,345.11 C789,359.2 789,372.95 789,385.67 " fill="none" id="Socket-TCPSocket" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="782,345.03,789,325.03,796,345.03,782,345.03" style="stroke: #A80036; stroke-width: 1.0;"/><!--link TCPSocket to HTTPServer--><path d="M789,537.52 C789,567.14 789,601.17 789,633 " fill="none" id="TCPSocket-HTTPServer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="789,524.24,785,530.24,789,536.24,793,530.24,789,524.24" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="790" y="567.0669">«uses»</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="764.9039" y="543.645">1..*</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="780.7313" y="621.9327">1</text><!--link HTTPServer to HTTPRequest--><path d="M633.98,860.19 C619.13,870.95 604.28,881.69 590,892 C558.94,914.42 525.71,938.33 493.84,961.22 " fill="none" id="HTTPServer-HTTPRequest" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="483.09,968.94,490.2967,968.6873,492.8352,961.9377,485.6285,962.1905,483.09,968.94" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="549" y="935.0669">«processes»</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="615.2958" y="880.3949">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="469.694" y="957.9404">1..*</text><!--link HTTPServer to HTTPResponse--><path d="M771.45,860.21 C766.32,893.12 760.72,929.09 755.59,962.02 " fill="none" id="HTTPServer-HTTPResponse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="753.58,974.96,758.4556,969.647,755.4265,963.1029,750.5509,968.416,753.58,974.96" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="761" y="935.0669">«sends»</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="762.0021" y="880.4162">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="730.8796" y="964.0735">1..*</text><!--link HTTPSchema to HTTPRequest--><path d="M320.07,912.06 C321.83,931.26 323.59,950.43 325.25,968.54 " fill="none" id="HTTPSchema-HTTPRequest" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="313.1,912.65,318.25,892.1,327.04,911.38,313.1,912.65" style="stroke: #A80036; stroke-width: 1.0;"/><!--link HTTPSchema to HTTPResponse--><path d="M492.61,904.87 C507.5,916.59 522.41,928.08 537,939 C558.59,955.16 581.95,971.73 604.84,987.51 " fill="none" id="HTTPSchema-HTTPResponse" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="487.8,910,476.48,892.09,496.5,899.03,487.8,910" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
package butterfly #DDDDDD
{

class Socket
{
    - _socketDomain, _socketType, _socketProtocol: int
    # _fd: int
    # _addr: sockaddr_in

    + Socket(int domain, int type, int protocol)
    + Socket(int fileDescriptor, int domain, int type, int protocol)

    + getFileDescriptor() const: int
    + shutdown() const: bool
    + setOptions() const: bool
    + setBlocking() const: bool
    + setNonBlocking() const: bool

    + bind(unsigned int port): bool
    + listen() const: bool
    + accept(): std::shared_ptr<Socket>
    + connect(const std::string& host, const int port): bool
    + disconnect() const: bool
}

class TCPSocket
{

    + TCPSocket()
    + TCPSocket(int fileDescriptor)

    + accept(): std::shared_ptr<TCPSocket>
    + send(const std::string& s) const: bool
    + recv(char *buf,int len) const: int
    + recvAll(int chunkSize) const: std::string
}


class HTTPServer
{
    - _port: unsigned int port
    - _running: bool
    - _TCPSocket, _newTCPSocket: std::shared_ptr<TCPSocket>
    - _httpRequest: std::unique_ptr<HTTPRequest>

    + HTTPServer(unsigned int port)

    - handleRequest():
    - recvRequest():
    - processRequest():
    - preprareResponse():
    - sendResponse():

    +run(): void
    +stop(): void
}

class HTTPSchema
{
    - _data, _body, _messageType: std::string
    - _httpMethod: Method
    - _protocol: Protocol
    - _httpHeaders: std::vector< std::pair<std::string, std::string> >

    + HTTPSchema(const std::string &messageType)

    + print() const: void
    + addHTTPData(const std::string &data): void
    + getHTTPData() const: std::string
    + setProtocol(Protocol protocol): void
    + getProtocol() const: Protocol
    + addBody(const std::string &body)
    + getBody() const: std::string
    + setHTTPHeader(const std::string &headerName, const std::string &headerContent): void
    + getHTTPHeader(const std::string &headerName) const: std::string
    + getHTTPHeaderSize() const: size_t

    + parseIncoming() = 0: void
    + prepareOutgoing() = 0: void
}

class HTTPRequest
{
    - _url, _userAgent: std::string

    + HTTPRequest()

    + setMethod(Method &method): void
    + getMethod() const: Method
    + setURL(const std::string &url): void
    + getURL() const: std::string
    + setUserAgent(const std::string &userAgent): void
    + getUserAgent() const: std::string
    + getRequestSize() const: size_t

    + parseIncoming(): void
    + prepareOutgoing(): void
}

class HTTPResponse
{
    - _reasonPhrase: std::string
    - _statusCode: size_t

    + HTTPResponse()

    + setStatusCode(size_t statusCode): void
    + getStatusCode() const: size_t
    + setReasonPhrase(size_t statusCode): void
    + getReasonPhrase() const: std::string
    + getResponseSize() const: size_t

    + parseIncoming(): void
    + prepareOutgoing(): void
}

Socket            <|- - TCPSocket
TCPSocket "1..*"  o- -  "1" HTTPServer : <<uses>>

HTTPServer "1"    - -* "1..*" HTTPRequest: <<processes>>
HTTPServer "1"    - -* "1..*" HTTPResponse: <<sends>>

HTTPSchema <|- - HTTPRequest
HTTPSchema <|- - HTTPResponse

}
@enduml

PlantUML version 1.2018.13(Mon Nov 26 18:11:51 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.11+9-Ubuntu-0ubuntu2.20.04
Operating System: Linux
OS Version: 5.11.0-38-generic
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>